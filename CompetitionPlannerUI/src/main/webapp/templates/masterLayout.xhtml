<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pl="http://planner.org/ui">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>#{messages['header.title']}</title>
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputScript library="js" name="application.js" />
</h:head>

<h:body id="body">
	<p:layout fullPage="true" widgetVar="layout" closeTitle="#{messages.labelClose}">
		<pl:stateSaver id="stateSaver"/>
		<p:layoutUnit position="north">
			<ui:insert name="heading">
				<ui:include src="/sections/header.xhtml" />
			</ui:insert>
		</p:layoutUnit>
		<p:layoutUnit position="center">
			<p:growl id="messagesPopup" showDetail="true" showSummary="false"/>
			<h:form id="pollForm">
				<p:poll interval="60" listener="#{startseiteBean.poll}" global="false" update=":messages" process="@this" rendered="false"/>
			</h:form>
			<ui:insert name="loginDialog">
				<ui:include src="/sections/loginDialog.xhtml"/>
			</ui:insert>
			<ui:insert name="confirmDialog">
				<ui:include src="/sections/confirmDialog.xhtml"/>
			</ui:insert>
			<ui:insert name="errorDialog">
				<ui:include src="/sections/errorDialog.xhtml"/>
			</ui:insert>
			<ui:insert name="ajaxStatus">
				<ui:include src="/sections/status.xhtml"/>
			</ui:insert>
			<h:panelGroup id="contentGroup" layout="block">
				<ui:insert name="menu">
					<ui:include src="/sections/menu.xhtml" />
				</ui:insert>
				<ui:insert name="main">
					<h:panelGroup id="mainContent" layout="block" styleClass="ui-corner-all ui-widget-content">

						<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" showSummary="false"/>

						<ui:include src="#{startseiteBean.mainContent}" />
						<h:form>
							<p:hotkey bind="f1" process="@none" update="help" oncomplete="toggleHelp()"/>
						</h:form>
					</h:panelGroup>
					<h:form rendered="false">
						<pe:ckEditor value="#{announcement.text}" widgetVar="annEditor" language="de"/>
					</h:form>
				</ui:insert>
			</h:panelGroup>
		</p:layoutUnit>
		<p:layoutUnit position="east" visible="false" closable="true" header="#{messages.help}" resizable="true" size="30%">
			<p:fieldset id="help">
				<h:outputText value="#{startseiteBean.help}" escape="false"/>
			</p:fieldset>
		</p:layoutUnit>
		<ui:debug rendered="#{facesContext.application.projectStage == 'Development'}"/>
	</p:layout>
</h:body>
</html>